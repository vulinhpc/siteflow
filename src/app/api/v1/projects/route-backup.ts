// Backup of complex implementation
// This file contains the full canonical implementation
// Use this as reference when the simple version works
